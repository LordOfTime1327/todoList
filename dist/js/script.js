let addInput=document.querySelector(".controll__addInput"),addBtn=document.querySelector(".controll__addBtn"),checkAll=document.querySelector(".checkAll"),importantAll=document.querySelector(".importantAll"),deleteAll=document.querySelector(".deleteAll"),deleteChecked=document.querySelector(".deleteChecked"),list=document.querySelector(".todoList"),body=document.querySelector("body"),todoList=[];function checkList(){localStorage.getItem("todo")&&(todoList=JSON.parse(localStorage.getItem("todo")),displayList()),checkDoneMsg(),checkImpMsg(),checkMsgColor(),checkEmptyList(),listenersOnListItem(),setTimeout(setColorOfMsg,1e3)}function checkDoneMsg(t){todoList.forEach((t,e)=>{t.checked?(list.children[e].classList.add("doneMsg"),list.children[e].children[0].setAttribute("checked","")):t.checked||(list.children[e].classList.remove("doneMsg"),list.children[e].children[0].removeAttribute("checked"))})}function checkImpMsg(t){todoList.forEach((t,e)=>{t.important&&list.children[e].classList.add("importantMsg")})}function checkEmptyList(){0==todoList.length&&(list.innerHTML='<p class="empty">Sorry, it`s empty here! \n    Please, add some tasks that You want to do.</p>')}function listenersOnListItem(){list.addEventListener("change",makeDoneMsg);let t=document.querySelectorAll(".todoList__item"),e=document.querySelectorAll(".todoList__btn_important"),o=document.querySelectorAll(".todoList__btn_delete");for(let l=0;l<t.length;l++)e[l].addEventListener("click",makeImportantMsg),o[l].addEventListener("click",deleteMsg)}window.addEventListener("load",checkList);let bg=document.querySelector(".bg"),alertBx=document.querySelector(".alert"),alertText=document.querySelector(".alert__text");function alertFn(t){alertText.innerHTML=t,alertBx.classList.add("alert_active"),addInput.setAttribute("disabled",""),setTimeout(hideAlert,3e3)}function hideAlert(){alertBx.classList.remove("alert_active"),addInput.removeAttribute("disabled","")}function addToList(t){if(t.preventDefault(),""==addInput.value||!addInput.value.trim())return void alertFn("Write some text to add");for(let t=0;t<todoList.length;t++)if(todoList[t].todo=todoList[t].todo.trim(),addInput.value=addInput.value.replace(/\s+/g," ").trim(),todoList[t].todo===addInput.value)return alertFn("This task is already exist"),void(addInput.value="");let e={todo:addInput.value,checked:!1,important:!1,color:null};todoList.push(e),displayList(),checkDoneMsg(),checkImpMsg(),checkEmptyList(),checkMsgColor(),checkDarkMode(),setColorOfMsg(),listenersOnListItem(),addInput.value="",localStorage.setItem("todo",JSON.stringify(todoList))}function displayList(){let t="";todoList.forEach((e,o)=>{t+=`\n    <li id="todoList_listItem_${o}" class="todoList__item">\n      <input type="checkbox" id="todoList_item_${o}" class="todoList__checkbox" >\n      <label for="todoList_item_${o}" class="todoList__customCheckbox"></label>\n      <label for="todoList_item_${o}" class="todoList__label">${e.todo}</label>\n      <div class='todoList__colors-icon'>\n        <div class='todoList__colors'>\n          <div class='todoList__color todoList__color_default'></div>\n        </div>\n      </div>\n      <i id="todoList_importantBtn_${o}"  class="fas fa-exclamation todoList__btn todoList__btn_important"></i>\n      <i id="todoList_deleteBtn_${o}" class="fas fa-trash todoList__btn todoList__btn_delete"></i>\n    </li>\n    `,list.innerHTML=t})}function setColorOfMsg(){let t=document.querySelectorAll(".todoList__colors");["rgb(0, 64, 255)","#ff8303","#501072","#fd055a","#01b407","#DFFF00","#9514b1","#700000"].forEach(e=>{for(let o=0;o<t.length;o++){let l=document.createElement("div");l.classList.add("todoList__color"),l.style.backgroundColor=e,t[o].appendChild(l)}});let e=document.querySelectorAll(".todoList__color");for(let t=0;t<e.length;t++)e[t].addEventListener("click",getColorFn)}function getColorFn(t){let e=window.getComputedStyle(this,null).getPropertyValue("background-color");this.parentNode.parentNode.parentNode.style.backgroundColor=e;let o=t.target.parentNode.parentNode.parentNode.getAttribute("id").split("_")[2];todoList.forEach((t,l)=>{l==o&&(t.color=e),localStorage.setItem("todo",JSON.stringify(todoList))})}function checkMsgColor(t){todoList.forEach((t,e)=>{t.color&&(list.children[e].style.backgroundColor=t.color),"rgba(0, 0, 0, 0.1)"!=t.color&&"rgba(255, 255, 255, 0.1)"!=t.color||(list.children[e].removeAttribute("style"),t.color=null),localStorage.setItem("todo",JSON.stringify(todoList))})}function makeDoneMsg(t){let e=t.target.getAttribute("id"),o=list.querySelector(".todoList__label[for="+e+"]").innerHTML;t.target.parentNode.classList.toggle("doneMsg"),todoList.forEach(t=>{t.todo===o&&(t.checked=!t.checked),localStorage.setItem("todo",JSON.stringify(todoList))}),checkDoneMsg()}function makeImportantMsg(t){t.target.parentNode.classList.toggle("importantMsg");let e=t.target.getAttribute("id").split("_")[2];todoList.forEach((t,o)=>{o==e&&(t.important=!t.important),localStorage.setItem("todo",JSON.stringify(todoList))})}function deleteMsg(t){let e=t.target.getAttribute("id").split("_")[2],o=t.target.parentNode;todoList.forEach((t,l)=>{l==e&&(todoList.splice(l,1),o.remove(),displayList(),listenersOnListItem()),localStorage.setItem("todo",JSON.stringify(todoList))}),checkDoneMsg(),checkImpMsg(),checkEmptyList(),checkMsgColor(),checkDarkMode()}function checkAllFn(t){t.preventDefault(),todoList.forEach(t=>{t.checked||(t.checked=!t.checked),localStorage.setItem("todo",JSON.stringify(todoList))}),checkDoneMsg(),checkMsgColor()}function importantAllFn(t){t.preventDefault(),todoList.forEach(t=>{t.important||(t.important=!t.important),localStorage.setItem("todo",JSON.stringify(todoList))}),checkImpMsg(),checkMsgColor()}function deleteAllFn(t){t.preventDefault(),todoList.length=0,localStorage.setItem("todo",JSON.stringify(todoList)),checkEmptyList(),checkMsgColor()}function deleteCheckedFn(t){t.preventDefault();for(let t=todoList.length-1;t>=0;t--)todoList[t].checked&&(todoList.splice(t,1),localStorage.setItem("todo",JSON.stringify(todoList)));displayList(),checkEmptyList(),checkImpMsg(),checkMsgColor(),checkDarkMode(),listenersOnListItem()}bg.addEventListener("click",hideAlert),addBtn.addEventListener("click",addToList),checkAll.addEventListener("click",checkAllFn),importantAll.addEventListener("click",importantAllFn),deleteAll.addEventListener("click",deleteAllFn),deleteChecked.addEventListener("click",deleteCheckedFn);let f,darkModeBtn=document.getElementById("darkMode"),tableStyleBtn=document.getElementById("tableStyle"),listStyleBtn=document.getElementById("listStyle"),settings=document.querySelector(".header__settings"),menu=document.querySelector(".menu"),task=document.getElementsByClassName("todoList__item"),themeStyle=[];function makeDarkMode(){checkMsgColor(),f.dark,f.dark=!f.dark,checkDarkMode(),localStorage.setItem("theme",JSON.stringify(themeStyle))}function makeListStyle(){f.listStyle||(f.listStyle=!f.listStyle),checkListStyle(),localStorage.setItem("theme",JSON.stringify(themeStyle))}function makeTableStyle(){f.tableStyle||(f.tableStyle=!f.tableStyle),checkTableStyle(),localStorage.setItem("theme",JSON.stringify(themeStyle))}function checkDarkMode(){f.dark?(body.classList.add("darkMode"),darkModeBtn.classList.add("active_light"),menu.classList.add("menu_dark"),menu.classList.remove("menu_light")):(body.classList.remove("darkMode"),darkModeBtn.classList.remove("active_light"),menu.classList.add("menu_light"),menu.classList.remove("menu_dark"));for(let t=0;t<task.length;t++)f.dark?(task[t].classList.add("todoList__item_dark"),task[t].classList.remove("todoList__item_light")):(task[t].classList.remove("todoList__item_dark"),task[t].classList.add("todoList__item_light"));checkMsgColor(),localStorage.setItem("theme",JSON.stringify(themeStyle))}function checkListStyle(){f.listStyle&&(list.classList.add("listStyle"),list.classList.remove("tableStyle"),f.tableStyle=!1)}function checkTableStyle(){f.tableStyle&&(list.classList.add("tableStyle"),list.classList.remove("listStyle"),f.listStyle=!1)}settings.addEventListener("click",function(){menu.classList.toggle("menu_active")}),document.addEventListener("click",function(t){t.target!=menu&&t.target!=settings&&t.target.parentNode!=menu&&menu.classList.remove("menu_active")}),window.addEventListener("load",function(){localStorage.getItem("theme")&&(themeStyle=JSON.parse(localStorage.getItem("theme")))}),window.addEventListener("load",function(){themeStyle.push({dark:!1,listStyle:!0,tableStyle:!1}),themeStyle.length=1,f=themeStyle[0],checkDarkMode(),checkMsgColor(),checkListStyle(),checkTableStyle(),localStorage.setItem("theme",JSON.stringify(themeStyle))}),darkModeBtn.addEventListener("click",makeDarkMode),listStyleBtn.addEventListener("click",makeListStyle),tableStyleBtn.addEventListener("click",makeTableStyle);let preloaderBox=document.querySelector(".preloader__box"),preloaderEl="\n  <div class='preloader__item'>\n    <div class='preloader__circle'></div>\n  </div>\n",preloaderElCount=18,a=preloaderElCount;for(;a--;)preloaderBox.innerHTML+=preloaderEl;let preloaderItem=document.querySelectorAll(".preloader__item");for(let t=0;t<preloaderItem.length;t++){let e=360/preloaderItem.length*t;preloaderItem[t].style.transform="translateY(-50%) rotate("+e+"deg)"}let preloaderCircle=document.querySelectorAll(".preloader__circle"),delay=0,w=.6,q=w/preloaderElCount;for(let t=0;t<preloaderCircle.length;t++)delay+=q,preloaderCircle[t].style.animationDelay=delay+"s",preloaderCircle[t].style.animationDuration=w+"s";window.addEventListener("load",()=>{setTimeout(()=>{document.querySelector(".preloader").style="opacity: 0; z-index: -1"},2e3)});